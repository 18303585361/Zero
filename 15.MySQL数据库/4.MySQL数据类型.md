# 一、MySQL数据类型

数据类型是定义列中可以存储什么类型的数据以及该数据实际怎样存储的基本规则

数据类型限制存储在数据列中的数据。例如，数值数据类型列只能接受术之类型的数据

在设计表中，应该特别重视所用的数据类型。使用错误的数据类型可能会严重地影响应用程序的功能和性能

更改包括数据的列不是一件小事（而且这样做可能会导致数据丢失）

数据类型分为：整型、浮点型、字符串、日期等

## 1、字符串数据类型

最常用的数据类型是字符串数据类型。它们存储字符串，如名字、地址、电话号码、邮政编码等

不管使用何种形式的字符串数据类型，字符串值都必须括在括号内

有两种基本的字符串类型，分别为定长字符串和变长字符串

#### 1-1、定长字符串    char

+ 接受长度固定的字符串，其长度实在创建表时指定的。定长列不允许存储多于指定长度字符的数据
+ 指定长度后，就会分配固定的存储空间用于存放数据
+ char（7）    不管实际插入多少个字符，它都会占用7个字符位置

#### 1-2、变长字符串    varchar

+ 存储可变长度的字符串
+ varchar（7）    如果实际插入 4 个字符，那么它只占 4 个字符位置。插入的数据长度不能超过 7 个字符

#### 1-3、Text    变长文本类型存储

#### 1-4、注意

+ 既然变长数据类型这么灵活，为什么还要使用定长数据类型？
+ 回答：因为性能，MySQL处理定长列远比处理变长列快得多
+ 手机号一般使用字符串进行存储

#### 1-5、字符串数据类型

> char    1~255个字符的定长串。它的长度必须在创建时指定，否则MySQL假定为char（1）
>
> enum    接受最多 64K个字符串组成的一个预定义结合的某个串
>
> Longtext    与text相同，但最大长度为4GB
>
> Mediumtext    与text相同，但最大长度为16K
>
> set    接受最多64个字符串组成的一个预定义集合的零个或多个字符串
>
> text    最大长度为 64K的变长文本
>
> Tinytext    与text相同，但最大长度为 255 字节
>
> varchar    长度可变，最多不超过255字节。如果在创建时指定为varchar（n），则可存储0到n个字符的变长字符串（其中 n ≤ 255 ）

## 2、数值类型

+ 数值数据类型存储数值。MySQL支持多种数值数据类型，每种存储的数值具有不同的取值范围。支持的取值范围越大，所需存储空间越多。

+ 与字符串不一样，数值不括在括号内。

#### 2-1、数值数据类型

> bit    位字段，1~64位（在MySQL5之前，bit在功能上等价于tinyint）
>
> bigint    整数值
>
> boolean（bool）    布尔标志，0 或 1，主要用于开/关（on/off）标志
>
> decimal（dec）    精度可变的浮点值
>
> double    双精度浮点值
>
> float    单精度浮点值
>
> int（integer）    整数值
>
> mediumint    整数值
>
> real    4字节的浮点值
>
> smallint    整数值，支持-32768~32767的数
>
> tinyint    整数值，支持-128~127的数

```mysql
 decimal(5,2)	表示数值总共 5 位，小数占 2 位。
 tinyint 占1字节（8位）空间，取值范围0~255；-128~127
 int 占4字节空间，取值范围：-21亿~21亿；0~42亿
 float 
```

+ MySQL中没有专门存储货币的数据类型，一般情况下使用 `decimal（8,2）`

#### 2-2、有无符号

+ 所有数值数据类型（除bit和boolean外）都可以有符号或无符号

+ 有符号数值列可以存储正或负的数值
+ 无符号数值列只能存储正数
+ 默认情况为有符号，但如果你知道自己不需要存储负值，可以使用 unsigned 关键字

#### 2-3、注意

+ 如果将邮政编码类似于 01234 存储为数值类型，则保存的将是数值 1234，此时需要使用字符串类型

## 3、日期和时间类型

+ MySQL使用专门的数据类型来存储日期和时间值

> date    表示1000-01-01~9999-12-31的日期，格式为YYYY-MM-DD
>
> datetime    date和time的组合，占用 8 个字节， `1000-01-01 00:00：00~9999-12-31 23:59:59`
>
> timestamp    功能和datetime相同（但范围较小）
>
> time    格式为HH：MM：SS
>
> year    用 2 位数字表示，范围是70（1970）年~69（2069）年，用4位数字表示，范围是1901年~2155年

## 4、二进制数据类型

+ 二进制数据类型可以存储任何数据（甚至包括二进制信息），如图像、多媒体、自处理文档等。
+ 一般情况下，图像、多媒体、自处理文档等都上传到服务器，而数据库仅仅记录他们的路径。

> blob    最大长度为 64K
>
> mediumblob    最大长度为 16MB
>
> longblob    最大长度为 4GB
>
> tinyblob    最大长度为255字节

# 二、表的字段约束

+ unsigned    无符号（给数值类型使用，表示只能写正数的值，不写即表示数值类型可以写负数）

+ 字段类型后面加括号限制宽度	

  + int（4）没有意义，默认无符号的 int 为 int（11），有符号的 int 为 int（10）  ，只有给int类型设置有前导 0 时，设置 int 的宽度才有意义 

  ```mysql
  例：
  命令1：
      create table stu（
          sid int(4) unsigned zerofill,
          name char(4));
  命令2：
  	insert into stu values(1,'aa');
  此时，数据表 stu 内的数据 sid 为 0001，
  	即：当添加sid值的时候，值不足四位，会用 0 补齐，也被称为前导 0 。
  ```

  + char（5）varchar（7）在字符类型后面加限制表示 字符串的长度为多少 

+ not null	不能为空，在操作数据库时如果输入该字段的数据为NULL，就会报错

+ default	设置默认值

+ primary key	主键不能为空且唯一,一般和自动递增一起配合使用

+ auto_increment	定义列为自增属性，一般用于主键，数值会自动加 1

+ unique	唯一索引（数据不能重复：用户名）可以增加查询速度，但是会降低插入和更新速度

# 三、MySQL的运算符

+ 算术运算符：+、-、*、/、%

+ 比较运算符：=、>、<、>=、<=、！=

+ 数据库特有的比较：in、not in、is null、is not、like、between、and

+ 逻辑运算符：and、or、not

+ like：支持特殊符号 % 和 _；

  + 其中，%表示任意数量的任意字符，_表示任意一位字符

  ```mysql
  例：
  	select * from users where name like '_三';
  该语句表示：
  	在数据表 users 中查找 name 字段中第二位值等于三的数据
  ```

  

# 四、主键

+ 表中每一行都应该有可以唯一标识字节的一列，用于记录两条记录不能重复，任意两行都不具有相同的主键值
+ 应该总是定义主键，虽然并不总是都需要主键，但大多数数据库设计人员都应保证他们创建的每个表具有一个主键，以便于以后的数据操纵和管理

## 4-1、要求

+ 记录一旦插入到表中，主键最好不要再修改
+ 不允许NULL
+ 不在主键列中使用可能会更改的值
  + 例如，如果使用一个名字作为主键以标识某个供应商，当该供应商合并和更改其名字时，必须更改这个主键）
+ 自增整数类型：数据库数据库会在插入数据时自动为每一条记录分配一个自增整数，这样我们就完全不用担心主键重复，也不用自己预先生成主键
+ 可以使用多个列作为联合主键，但联合主键并不常用。使用多列作为主键时，所有列值的组合必须是唯一的

